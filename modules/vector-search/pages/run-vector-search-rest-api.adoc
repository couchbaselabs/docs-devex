= Run a Vector Search with the REST API and curl/HTTP 
:page-topic-type: guide 
:page-ui-name: {ui-name}
:page-product-name: {product-name}
:description: You can use the REST API and a curl command to run a search against a Vector Search index and return similar vectors.

[abstract]
{description}

For more information about how the Search Service scores documents in search results, see xref:run-searches.adoc#scoring[Scoring for Search Queries].

== Prerequisites 

* You have the Search Service enabled on a node in your database.
For more information about how to deploy a new node and Services on your database, see xref:server:manage:manage-nodes/node-management-overview.adoc[].

* You have a bucket with scopes and collections in your database.
For more information about how to create a bucket, see xref:server:manage:manage-buckets/create-bucket.adoc[]. 

* Your user account has the *Search Admin* or *Search Reader* role. 

* You installed the Couchbase command-line tool (CLI).

* You have the hostname or IP address for the node in your database where you're running the Search Service.
For more information about where to find the IP address for your node, see xref:server:manage:manage-nodes/list-cluster-nodes.adoc[].

* You have created a Vector Search index. 
+
For more information about how to create a Vector Search index, see xref:create-vector-search-index-ui.adoc[] or xref:create-vector-search-index-rest-api.adoc[].
+
[TIP]
--
include::partial$download-sample-partial.adoc[]

For the best results, xref:search-create-quick-index.adoc[create child fields in Quick Mode] or xref:search:create-child-field.adoc[in Advanced Mode] for the `colorvect_l2` and `color` fields. 
--

== Procedure 

To run a Vector search with the REST API: 

. In your command-line tool, enter a `curl` command with the `XPOST` verb. 
. Set your header content to include `"Content-Type: application/json"`.
. Enter your username, password, and the Search Service endpoint on port `8094` with the name of the Vector Search index you want to query: 
+
[source,console]
----
include::example$run-vector-search-header.sh[]
----
+
To use SSL, use the `https` protocol in the Search Service endpoint URL and port `18094`. 
. Enter the JSON payload for your query. 
+
TIP: You can copy the JSON for a Query Request from the Couchbase {page-ui-name} to use in your REST API call.
For more information about how to perform a search with the UI, see xref:search:simple-search-ui.adoc[].

=== Example

In the following example, the JSON payload uses both a `query` and `knn` object to run both a Vector Search and traditional Search query on an index named `color-index`.

The query searches for a specified Euclidean distance color vector, but uses the `query` object to search for a color with a `brightness` value in the range of `70-80`:

[source,console]
----
include::example$run-vector-search-payload.sh[]
----

The Search Service combines the Vector search results from the `knn` object with the traditional `query` object by using an `OR` function. 
If the same documents match the `knn` and `query` objects, the Search Service ranks those documents higher in search results.  

TIP: For a more complex query, you can copy the `query` object from the example under xref:run-vector-search-ui.adoc#large[Example: Running a Semantic Search Query with a Large Embedding Vector] to use in your REST API call. 

For more information about the available properties for a Search query JSON payload, see xref:search:search-request-params.adoc[].

== Next Steps 

If you do not get the search results you were expecting, you can change the JSON definition xref:search:search-index-params.adoc[for your Search index] or change the parameters xref:search:search-request-params.adoc[for your Search query].

You can also xref:search:customize-index.adoc[].