= Run a Simple Search with the REST API and curl/HTTP 
:page-topic-type: guide 
:page-ui-name: {ui-name}
:page-product-name: {product-name}
:page-aliases: fts:fts-searching-with-curl-http-requests.adoc, fts:fts-secure-fts-queries.adoc
:description: You can use the REST API and a curl command to run a search against a Search index.

[abstract]
{description}

For more information about how the Search Service scores documents in search results, see xref:run-searches.adoc#scoring[Scoring for Search Queries].

== Prerequisites 

* You have the Search Service enabled on a node in your database.
For more information about how to deploy a new node and Services on your database, see xref:server:manage:manage-nodes/node-management-overview.adoc[].

* Your user account has the *Search Admin* or *Search Reader* role. 

* You installed the Couchbase command-line tool (CLI).

* You have the hostname or IP address for the node in your database where you're running the Search Service.
For more information about where to find the IP address for your node, see xref:server:manage:manage-nodes/list-cluster-nodes.adoc[].

* You have created a Search index. 
+
For more information about how to create a Search index, see xref:create-search-index-ui.adoc[] or xref:create-search-index-rest-api.adoc[].

== Procedure 

To run a simple search with the REST API: 

. In your command-line tool, enter a `curl` command with the `XPOST` verb. 
. Set your header content to include `"Content-Type: application/json"`.
. Enter your username, password, and the Search Service endpoint on port `8094` with the name of the index you want to query: 
+
[source,console]
----
include::example$run-search-header.sh[]
----
+
To use SSL, use the `https` protocol in the Search Service endpoint URL and port `18094`. 
. Enter the JSON payload for your query. 
+
[TIP]
.Couchbase Server version 7.6.2
====
You can copy the JSON for a Search query from the Couchbase {page-ui-name} to use in your REST API call.
You can choose to copy a full command-line curl example, or copy just the xref:search-request-params.adoc[JSON payload]. 
For more information about how to perform a search with the UI, see xref:simple-search-ui.adoc[].
====

=== Example: Simple Text Search 

In the following example, the JSON payload queries an index named `landmark-content-index` for the strings `view`, `food`, and `beach`:

[source,console]
----
include::example$run-search-payload.sh[]
----

If the request is successful, the Search Service API starts by returning a status and a summary of the query request: 

[source,json]
----
include::example$query-sample-results.jsonc[tag=query_summary]
----

The Search Service returns an array, called `hits`, which contains objects that describe the matches found in each document in the Search index: 

[source,json]
----
include::example$query-sample-results.jsonc[tag=first_hit]
----

The Search query set score explanations to `true`, so the Search Service shows how it calculated the score for each document. 

It also includes the locations of each match, under the `locations` object: 

[source,json]
----
include::example$query-sample-results.jsonc[tag=locations]
----

The Search query enabled highlighting, so the Search Service uses the `<mark>` HTML tag to mark each match it found inside the Search index, inside a `fragments` object: 

[source,json]
----
include::example$query-sample-results.jsonc[tag=highlight]
----

Since the target Search index was configured to store field values and return them in results, the Search Service returns the original field content in the `fields` object: 

[source,json]
----
include::example$query-sample-results.jsonc[tag=field_content]
----

At the end of the `hits` array, the Search Service returns a quick summary of the total number of hits, the maximum score, how long the query took, and other information: 

[source,json]
----
include::example$query-sample-results.jsonc[tag=end_summary]
----

For more information about the available properties for a Search query JSON payload, see xref:search-request-params.adoc[].

=== Example: Validate a Search Request 

In the following example, the JSON payload queries a Search index, `landmark-content-index`, using a xref:search-request-params.adoc#geopoint-queries-distance[Distance/Radius-Based Geopoint Query] on the `geo` field: 

[source,json]
----
include::example$run-search-unindexed-field.sh[]
----

The query runs, but does not return any results: 

[source,json]
----
include::example$query-sample-results-unindexed.jsonc[]
----

To try and validate why the query did not return any results, you can include the xref:search-request-params.adoc#ctl[ctl object] with the `validate` property:

[source,json]
----
include::example$run-search-validate.sh[]
----

With the `validate` property included, the Search query now returns a `400 Bad Request` error and the following JSON response:

[source,json]
----
include::example$query-sample-results-validate.jsonc[]
----

The Search Service validates the query and identifies that the `geo` field used in the query is not included in the Search index. 

== Next Steps 

If you do not get the search results you were expecting, you can change the JSON payload xref:search-index-params.adoc[for your Search index] or xref:search-request-params.adoc[for your Search query].

If your database is running Couchbase Server version 7.6.2 and later, you can also copy a full command-line curl example from the {page-ui-name} to use with the REST API, or edit a generated Search query with the built-in code editor.

You can also xref:customize-index.adoc[].
